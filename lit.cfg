# Lit local configuration for Cheerp tests

import lit.formats
import os

# Test name and source root
config.name = 'Cheerp'
config.test_source_root = os.path.dirname(__file__)

# Use Shell test format 
config.test_format = lit.formats.ShTest(execute_external=True)

# File suffixes to consider as tests
config.suffixes = ['.cpp', '.c']

# Exclude certain patterns
config.excludes = ['unit/tests.h', 'Inputs']

# Substitutions for common patterns
config.substitutions.append(('%cheerp_clang', '/opt/cheerp/bin/clang++'))
config.substitutions.append(('%FileCheck', '/home/alex/llvm-lit-exploration/llvm_venv/bin/FileCheck'))
config.substitutions.append(('%node', 'node'))

# %S = directory of the test
# %s = path to the test file  
# %t = temporary file path unique to this test

# Enable execution of tests from within the test directory
config.test_exec_root = os.path.dirname(__file__)

# Set environment variables if needed
if 'PATH' in os.environ:
    config.environment['PATH'] = os.environ['PATH']
